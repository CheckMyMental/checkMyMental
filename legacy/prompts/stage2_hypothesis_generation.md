# Stage 2: Hypothesis Generation (가설 생성)

## System Instruction
- 입력된 요약 리포트를 분석한다.
- [RAG Tool 1: Vector DB]을 호출하여 관련 질환 Top 3를 검색한다.
- [RAG Tool 2: DSM-5 DB]를 호출하여 Top 3의 핵심 진단 기준(Criteria)을 검색한다.
- 두 정보를 조합하여 다음 단계 LLM이 읽을 '가설 리포트' 문자열을 생성한다.
- 이 단계는 사용자 상호작용 없이 내부적으로 처리된다.

## Required Context
- RAG Tool 1 (Vector DB): 증상 키워드 -> 질환명 Top 3 반환
- RAG Tool 2 (DSM-5 DB): 질환명 -> 핵심 진단 기준 문자열 반환

## Input Prefix
Summary String:

## Output Prefix
Hypothesis String:

## Prompt

입력된 'Summary String'을 분석하라.

1. 문자열에서 RAG(Vector DB) 검색을 위한 핵심 키워드(증상, 기간 등)를 추출한다.
2. [RAG Tool 1]을 호출하여 Top 3 관련 질환명을 가져온다. (User Step 2)
3. 가져온 Top 3 질환명으로 [RAG Tool 2]를 호출하여 각각의 '핵심 진단 기준'을 가져온다.
4. 입력 문자열과 진단 기준을 비교하여 각 질환의 초기 확률(예: 높음, 중간, 낮음)을 판단한다. (User Step 3)
5. 다음 단계(Stage 3)가 감별 질문을 생성할 수 있도록, 이 모든 정보를 '가설 리포트' 문자열로 출력한다.

## Output Format (Example)
```
Hypothesis String:
가설 리포트:
1. [질환명 1] (확률: [높음/중간/낮음]): 핵심 기준은 '...'입니다.
2. [질환명 2] (확률: [높음/중간/낮음]): 핵심 기준은 '...'입니다.
3. [질환명 3] (확률: [높음/중간/낮음]): 핵심 기준은 '...'입니다.
*다음 단계에서 '[질환명 1]'과 '[질환명 2]'의 '...'를 감별할 것.
```

## Few-shot

Input:
```
Summary String:
환자 상태 요약: 주 호소는 '일이 손에 안 잡히고 재미가 없음'이며, '무기력함', '귀찮음'의 감정 상태를 보임. 약 1-2달간 지속됨. '집중력 저하', '사회적 위축', '식욕 저하', '수면 후 피로감'의 관련 증상 관찰됨.
```

Output (RAG 호출 후 생성된 문자열):
```
Hypothesis String:
가설 리포트:
1. 주요 우울 장애 (확률: 높음): 핵심 기준은 '거의 매일 지속되는 우울한 기분 또는 흥미/즐거움의 현저한 저하'입니다.
2. 번아웃 (직무 소진) (확률: 중간): 핵심 기준은 '주로 직무 및 업무 환경과 관련된 정서적 고갈'입니다.
3. 범불안 장애 (확률: 낮음): 핵심 기준은 '통제하기 어려운 과도한 불안과 걱정'입니다.
*다음 단계에서 '주요 우울 장애'와 '번아웃'의 '전반적인 흥미 저하' vs '직무 관련 흥미 저하'를 감별할 것.
```
